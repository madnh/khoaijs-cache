!function(e,t){if("function"==typeof define&&define.amd)define(["require","lodash"],function(i,n){var r=t(n);return i.specified("khoaijs")&&i(["khoaijs"],function(e){e.Cache=r}),e.Cache=r,r});else{var i=t(e._);e.Khoai&&(e.Khoai.Cache=i),e.Cache=i}}(this,function(e){"use strict";function t(){p&&clearInterval(p),p=setInterval(a,1e3*f)}function i(t){if(e.has(c,t)){if(!0===c[t].expire_time||c[t].expire_time-1>parseInt(Math.floor(e.now()/1e3)))return!0;r(t)}return!1}function n(i,n,r){!e.isUndefined(r)&&e.isNumber(Number(r))&&e.isFinite(Number(r))||(r=t.CACHE_MEDIUM),c[i]={value:n,live_time:r,expire_time:!0===r||parseInt(Math.floor(e.now()/1e3))+r}}function r(){e.each(e.flatten(arguments),function(e){delete c[e]})}function o(r,o,u){var a=t.CACHE_MEDIUM,f=[];if(e.isUndefined(u)&&(u=!0),i(r)){var p=c[r];if(a=p.live_time,f=p.value,e.isArray(f)||(f=[f]),u)f.push(o);else{var s=e.lastIndexOf(f,o);-1!=s&&f.splice(s,1)}}else{if(!u)return;f.push(o)}return n(r,f,a),c[r].value}function u(t,r,o){return!e.isUndefined(r)&&e.isNumber(Number(r))&&e.isFinite(Number(r))||(r=1),e.isUndefined(o)&&(o=!0),r=o?Math.abs(r):-1*Math.abs(r),i(t)?(c[t].value=Number(c[t].value),e.isNumber(c[t].value)&&e.isFinite(c[t].value)||(c[t].value=0),c[t].value+=r):n(t,r),c[t].value}function a(){var t=[],i=parseInt(Math.floor(e.now()/1e3));e.each(c,function(e,n){!0!==e.expire_time&&e.expire_time<=i&&t.push(n)}),r(t)}var f,p,s,c={};s={CACHE_MIN:10,CACHE_TINY:60,CACHE_SHORT:300,CACHE_MEDIUM:600,CACHE_LONG:3600,CACHE_FOREVER:!0};for(var l in s)s.hasOwnProperty(l)&&Object.defineProperty(t,l,{enumerable:!0,value:s[l]});return f=t.CACHE_MIN,t.prototype.set=function(e,t,i){n(e,t,i)},t.prototype.has=function(e){return i(e)},t.prototype.get=function(t,i){if(e.has(c,t)){if(!0===c[t].expire_time||c[t].expire_time>parseInt(Math.floor(e.now()/1e3)))return c[t].value;delete c[t]}return i},t.prototype.touch=function(t,i){if(this.has(t)){if(!0!==c[t].expire_time){var n=c[t];return e.isNumber(i)&&e.isFinite(i)||(i=n.live_time),n.expire_time=Math.max(n.expire_time,parseInt(Math.floor(e.now()/1e3))+i),n.expire_time}return!0}return!1},t.prototype.list=function(t){var i,n,r=parseInt(Math.floor(e.now()/1e3));return t||e.isUndefined(t)?(i=[],n=function(e){i.push(e)}):(i={},n=function(e,t){i[e]=t}),e.each(c,function(e,t){(!0===e.expire_time||r<e.expire_time)&&n(t,e)}),i},t.prototype.clean=function(){return a()},t.prototype.expire=function(){r(Array.prototype.slice.apply(arguments))},t.prototype.increment=function(t,i){return e.isNumber(i)&&e.isFinite(i)||(i=1),u(t,i,!0)},t.prototype.decrement=function(t,i){return e.isNumber(i)&&e.isFinite(i)||(i=1),u(t,i,!1)},t.prototype.arrayPush=function(e,t){return o(e,t,!0)},t.prototype.arrayWithout=function(e,t){return o(e,t,!1)},new t});
//# sourceMappingURL=cache.min.js.map
